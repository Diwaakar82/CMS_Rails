<div class="post">
  <h1>
    <%= @post.title %>
  </h1>
   
  <p>
    <strong>Description:</strong>
    <%= @post.description %>
  </p>
  
  <p>
    <strong>Likes:</strong>
    <%= @post.likes %>
  </p>
  
  <p>
    <% if @post.categories.present? %>
      <strong>Categories:</strong> 
      <% @post.categories.each do |category| %>
        <%= category.title %>
      <% end %>
    <% end %>
  </p>


  <div class="post-actions">
    <%= link_to 'Edit', edit_post_path(@post), class: "links" %>
    <%= link_to 'Delete', post_path(@post), method: :delete, data: { confirm: 'Are you sure?' }, class: "links" %>
  </div>
  <div class="post">
    <h2>Comments:</h2>

    <% @post.comments.each do |comment| %>
      <div class="comment">
        <p>
          <strong>Commenter:</strong>
          <%= comment.commenter %>
        </p>
      
        <p>
          <strong>Comment:</strong>
          <%= comment.text %>
        </p>
      
        <div class="comment-actions">
          <%= link_to 'Delete', [comment.post, comment], method: :delete, data: { confirm: 'Are you sure?' }, class: "links" %>
        </div>
      </div>
    <% end %>
  </div>
</div>  

<div class="comment-form">
  <h2>Add Comment:</h2>
  <%= form_with(model: [@post, @post.comments.build], local: true) do |form| %>
    <div class="form-group">
      <%= form.label :commenter %><br>
      <%= form.text_field :commenter, class: "form-control" %>
    </div>

    <div class="form-group">
      <%= form.label :text %><br>
      <%= form.text_area :text, class: "form-control" %>
    </div>

    <div class="form-group">
        <%= form.number_field :user_id, id: :comment_user_id, class: "form-control", value: current_user.id, type: :hidden %>
    </div>

    <div class="button-container">
      <%= form.submit "Submit", class: "like-button" %>
    </div>
  <% end %>
</div>